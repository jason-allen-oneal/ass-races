{"code":"import { __extends } from \"tslib\";\r\nimport AlignGrid from '../components/grid';\r\nimport AssButton from '../components/ass-button';\r\nimport AssModal from '../components/ass-modal';\r\nvar WagerScene = /** @class */ (function (_super) {\r\n    __extends(WagerScene, _super);\r\n    function WagerScene() {\r\n        var _this = _super.call(this, {\r\n            key: 'wagerScene',\r\n        }) || this;\r\n        _this.wagerModal = null;\r\n        return _this;\r\n    }\r\n    WagerScene.prototype.init = function (data) {\r\n        this.asses = data.asses;\r\n    };\r\n    WagerScene.prototype.preload = function () {\r\n        /*\r\n        this.plugins.get('rexwebfontloaderplugin').addToScene(this);\r\n        this.load.rexWebFont({\r\n            google: {\r\n                families: this.game.config.Game.fonts\r\n            }\r\n        });\r\n        */\r\n    };\r\n    WagerScene.prototype.create = function () {\r\n        var _this = this;\r\n        this.add.image(400, 300, 'flags');\r\n        var wagerSceneGridConfig = {\r\n            'scene': this,\r\n            'cols': 5,\r\n            'rows': Math.ceil(this.asses.length / 2)\r\n        };\r\n        this.wagerSceneGrid = new AlignGrid(wagerSceneGridConfig);\r\n        var infoText = this.add.text(0, 0, 'Select your ass!', {\r\n            fontFamily: 'Luckiest Guy',\r\n            fontSize: '20px',\r\n            color: '#DE9E36',\r\n        });\r\n        this.wagerSceneGrid.placeAtIndex(2, infoText);\r\n        var i = 10;\r\n        var _loop_1 = function (ass) {\r\n            var assContainer = new AssButton(this_1, ass, function () { return _this.selectAss(ass.slug); });\r\n            this_1.wagerSceneGrid.placeAtIndex(i, assContainer);\r\n            i++;\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, _a = this.asses; _i < _a.length; _i++) {\r\n            var ass = _a[_i];\r\n            _loop_1(ass);\r\n        }\r\n    };\r\n    WagerScene.prototype.selectAss = function (slug) {\r\n        var _this = this;\r\n        var ass = this.asses.find(function (item) { return item.slug === slug; });\r\n        this.wagerModal = new AssModal(this, ass, function () {\r\n            globalThis.socket.emit('race-start', { id: ass.id });\r\n            globalThis.socket.on('race-start-response', function (data) {\r\n                _this.scene.start('playScene', { selected: ass, opponents: data.opponents });\r\n            });\r\n        });\r\n        var modal = this.wagerModal.getDialog();\r\n        this.rexUI.modalPromise(modal.setPosition(400, 300), {\r\n            manualClose: true,\r\n            duration: {\r\n                in: 500,\r\n                out: 500\r\n            }\r\n        }).then(function (result) {\r\n            // console.log(result.text);\r\n        });\r\n    };\r\n    return WagerScene;\r\n}(AR.Classes.Scene));\r\nexport default WagerScene;\r\n//# sourceMappingURL=wager.js.map","references":["/var/www/ass-races/src/components/grid.ts","/var/www/ass-races/src/components/ass-button.ts","/var/www/ass-races/src/components/ass-modal.ts"],"map":"{\"version\":3,\"file\":\"wager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/scenes/wager.ts\"],\"names\":[],\"mappings\":\"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\"}"}

{"code":"var AssModal = /** @class */ (function () {\r\n    function AssModal(scene, ass, callback) {\r\n        var _this = this;\r\n        this.scene = scene;\r\n        this.callback = callback;\r\n        this.ass = ass;\r\n        this.wager = 0;\r\n        this.style = {\r\n            text: {\r\n                fontFamily: 'Luckiest Guy',\r\n                fontSize: '15px',\r\n                color: '0xFFFFFF',\r\n                paddingX: 30,\r\n                paddingY: 70\r\n            },\r\n            modal: {\r\n                background: '0x848884',\r\n                border: {\r\n                    color: '0x99EDCC',\r\n                    width: 2\r\n                }\r\n            }\r\n        };\r\n        var totalRaces = this.ass.wins + this.ass.losses;\r\n        var ratio = (1 / (this.ass.wins / this.ass.losses)) - 1;\r\n        var ratioStr = ratio + ':1';\r\n        var text = 'ODDS: ' + ratioStr + \"\\n\";\r\n        text += 'TOTAL RACES: ' + totalRaces + \"\\n\\n\";\r\n        text += 'Your cash: ' + scene.registry.get('cash');\r\n        this.dialog = scene.rexUI.add.dialog({\r\n            x: 400,\r\n            y: 300,\r\n            width: 500,\r\n            background: scene.rexUI.add.roundRectangle(0, 0, 100, 100, 20, 0x1565c0),\r\n            title: this.createLabel(this.ass.name),\r\n            toolbar: [this.createLabel(\"X\")],\r\n            leftToolbar: [scene.add.image(0, 20, this.ass.slug + '_1')],\r\n            content: this.createLabel(text),\r\n            description: this.createLabel('Place your wager'),\r\n            choices: [\r\n                this.createLabel(\"100\"),\r\n                this.createLabel(\"250\"),\r\n                this.createLabel(\"500\"),\r\n                this.createLabel('All In!')\r\n            ],\r\n            choicesType: 'radio',\r\n            choicesSetValueCallback: function (button, value) {\r\n                if (value) {\r\n                    button.getElement('background').setStrokeStyle(1, 0xffffff);\r\n                }\r\n                else {\r\n                    button.getElement('background').setStrokeStyle();\r\n                }\r\n            },\r\n            actions: [\r\n                this.createLabel(\"Race\"),\r\n                this.createLabel(\"Cancel\")\r\n            ],\r\n            space: {\r\n                left: 20,\r\n                right: 20,\r\n                top: -20,\r\n                bottom: -20,\r\n                title: 25,\r\n                titleLeft: 30,\r\n                content: 25,\r\n                description: 25,\r\n                descriptionLeft: 20,\r\n                descriptionRight: 20,\r\n                choices: 25,\r\n                toolbarItem: 5,\r\n                choice: 15,\r\n                action: 15\r\n            },\r\n            expand: {\r\n                title: false\r\n            },\r\n            align: {\r\n                title: \"center\",\r\n                actions: \"right\" // 'center'|'left'|'right'\r\n            },\r\n            click: {\r\n                mode: \"release\"\r\n            }\r\n        }).layout();\r\n        this.dialog\r\n            .on('button.click', function (button, groupName, index, pointer, event) {\r\n            switch (button.name) {\r\n                case 'X':\r\n                case 'Cancel':\r\n                    _this.close(index, button);\r\n                    break;\r\n                case '100':\r\n                case '250':\r\n                case '500':\r\n                    _this.wager = parseInt(button.name);\r\n                    break;\r\n                case 'All In!':\r\n                    _this.wager = scene.registry.get('cash');\r\n                    break;\r\n                case 'Race':\r\n                    if (_this.wager) {\r\n                        _this.race();\r\n                    }\r\n                    else {\r\n                        var toast = scene.rexUI.add.toast({\r\n                            x: 400,\r\n                            y: 300,\r\n                            background: scene.rexUI.add.roundRectangle(0, 0, 2, 2, 20, '0x4e342e'),\r\n                            text: scene.add.text(0, 0, '', {\r\n                                fontSize: '24px'\r\n                            }),\r\n                            space: {\r\n                                left: 20,\r\n                                right: 20,\r\n                                top: 20,\r\n                                bottom: 20,\r\n                            },\r\n                            duration: {\r\n                                in: 250,\r\n                                hold: 1000,\r\n                                out: 250,\r\n                            },\r\n                        })\r\n                            .showMessage('A wager is required.')\r\n                            .showMessage('Please select an amount which to wager.');\r\n                    }\r\n                    break;\r\n            }\r\n        })\r\n            .on('button.over', function (button, groupName, index, pointer, event) {\r\n            button.getElement('background').setStrokeStyle(1, 0xffffff);\r\n        })\r\n            .on('button.out', function (button, groupName, index, pointer, event) {\r\n            button.getElement('background').setStrokeStyle();\r\n        });\r\n    }\r\n    AssModal.prototype.getDialog = function () {\r\n        return this.dialog;\r\n    };\r\n    AssModal.prototype.createLabel = function (text) {\r\n        return this.scene.rexUI.add.label({\r\n            background: this.scene.rexUI.add.roundRectangle(0, 0, 0, 0, 20, 0x5e92f3),\r\n            text: this.scene.add.text(0, 0, text, {\r\n                fontSize: '24px'\r\n            }),\r\n            space: {\r\n                left: 10,\r\n                right: 10,\r\n                top: 10,\r\n                bottom: 10\r\n            },\r\n            name: text\r\n        });\r\n    };\r\n    AssModal.prototype.race = function () {\r\n        var cash = this.scene.registry.get('cash');\r\n        this.scene.registry.set('wager', this.wager);\r\n        this.scene.registry.set('cash', cash - this.wager);\r\n        this.callback();\r\n    };\r\n    AssModal.prototype.close = function (index, button) {\r\n        this.dialog.emit('modal.requestClose', { index: index, text: button.text });\r\n    };\r\n    return AssModal;\r\n}());\r\nexport default AssModal;\r\n//# sourceMappingURL=ass-modal.js.map","references":["/var/www/ass-races/node_modules/phaser3-rex-plugins/templates/ui/ui-components.d.ts"],"map":"{\"version\":3,\"file\":\"ass-modal.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/components/ass-modal.ts\"],\"names\":[],\"mappings\":\"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\"}"}
